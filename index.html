<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>موس کامبت</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap');

    body {
      text-align: center;
      font-family: 'Vazirmatn', sans-serif;
      background: linear-gradient(135deg, #1e1e1e, #333);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 20px;
      background: linear-gradient(90deg, #00c853, #00e676);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 2px 2px 10px rgba(0, 255, 0, 0.5);
    }

    .container {
      background: rgba(30, 30, 30, 0.95);
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.4);
      width: 90%;
      max-width: 450px;
      backdrop-filter: blur(10px);
    }

    .status {
      font-size: 2rem;
      margin: 15px 0;
      font-weight: bold;
      text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.5);
    }

    /* دکمه کلیک: دایره‌ای، بزرگ و با افکت‌های پویا */
    #clickButton {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px auto;
      background: radial-gradient(circle, #00c853, #00e676);
      box-shadow: 0px 8px 20px rgba(0, 255, 0, 0.5);
      transition: all 0.3s ease;
      border: none;
      font-weight: bold;
      position: relative;
      overflow: hidden;
    }

    #clickButton:hover {
      transform: scale(1.15);
      background: radial-gradient(circle, #00e676, #00ff7f);
    }

    #clickButton:disabled {
      background: #555;
      cursor: not-allowed;
      box-shadow: none;
    }

    /* دکمه ارتقا با طراحی مدرن و رنگارنگ */
    #upgradeButton {
      font-size: 1.5rem;
      padding: 15px;
      border: none;
      border-radius: 15px;
      background: linear-gradient(90deg, #ff9800, #ff5722);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      margin: 10px 0;
      box-shadow: 0px 4px 10px rgba(255, 87, 34, 0.5);
      font-weight: bold;
    }

    #upgradeButton:hover {
      transform: scale(1.05);
      background: linear-gradient(90deg, #ff5722, #ff3d00);
    }

    /* دکمه ریست بازی با استایل منحصر به فرد */
    #resetButton {
      font-size: 1.5rem;
      padding: 15px;
      border: none;
      border-radius: 15px;
      background: linear-gradient(90deg, #8e2de2, #4a00e0);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      margin: 10px 0;
      box-shadow: 0px 4px 10px rgba(138, 43, 226, 0.5);
      font-weight: bold;
    }

    #resetButton:hover {
      transform: scale(1.05);
      background: linear-gradient(90deg, #4a00e0, #8e2de2);
    }
  </style>
  <script>
    (function () {
      let gameData = JSON.parse(localStorage.getItem("gameData")) || {
        score: 0,
        clickValue: 1,
        upgradeCost: 10,
        energy: 10,
        maxEnergy: 10,
        lastEnergyTime: Date.now()
      };

      function saveGame() {
        localStorage.setItem("gameData", JSON.stringify(gameData));
      }

      // پخش افکت صوتی کوتاه هنگام کلیک
      function playClickSound() {
        try {
          let context = new (window.AudioContext || window.webkitAudioContext)();
          let oscillator = context.createOscillator();
          oscillator.type = 'triangle';
          oscillator.frequency.setValueAtTime(200, context.currentTime);
          oscillator.connect(context.destination);
          oscillator.start();
          oscillator.stop(context.currentTime + 0.1);
        } catch (e) {
          // در صورت عدم پشتیبانی یا خطا، صدا پخش نمی‌شود
        }
      }

      function hitMouse() {
        if (gameData.energy > 0) {
          playClickSound();
          gameData.score += gameData.clickValue;
          gameData.energy--;
          saveGame();
          updateUI();
        } else {
          alert("انرژی کافی نداری! منتظر بمون تا بازیابی بشه.");
        }
      }

      function buyUpgrade() {
        if (gameData.score >= gameData.upgradeCost) {
          gameData.score -= gameData.upgradeCost;
          gameData.clickValue++;
          gameData.upgradeCost = Math.floor(gameData.upgradeCost * 1.5);
          saveGame();
          updateUI();
        } else {
          alert("امتیاز کافی برای ارتقا نداری!");
        }
      }

      function resetGame() {
        if (confirm("آیا مطمئن هستید که می‌خواهید بازی را ریست کنید؟")) {
          gameData = {
            score: 0,
            clickValue: 1,
            upgradeCost: 10,
            energy: 10,
            maxEnergy: 10,
            lastEnergyTime: Date.now()
          };
          saveGame();
          updateUI();
        }
      }

      function regainEnergy() {
        let now = Date.now();
        let timePassed = Math.floor((now - gameData.lastEnergyTime) / 1500);
        if (timePassed > 0) {
          gameData.energy = Math.min(gameData.maxEnergy, gameData.energy + timePassed);
          gameData.lastEnergyTime = now;
          saveGame();
          updateUI();
        }
      }

      function updateUI() {
        document.getElementById("score").innerText = "امتیاز: " + gameData.score;
        document.getElementById("energy").innerText = "انرژی: " + gameData.energy + "/" + gameData.maxEnergy;
        document.getElementById("upgradeButton").innerText = "افزایش قدرت کلیک (هزینه: " + gameData.upgradeCost + ")";
        document.getElementById("clickButton").disabled = (gameData.energy === 0);
      }

      setInterval(regainEnergy, 1500);
      window.onload = function() {
        regainEnergy();
        updateUI();
      };

      window.hitMouse = hitMouse;
      window.buyUpgrade = buyUpgrade;
      window.resetGame = resetGame;
    })();
  </script>
</head>
<body>
  <h1>🐭 موس کامبت 🐭</h1>
  <div class="container">
    <p id="score" class="status">امتیاز: 0</p>
    <p id="energy" class="status">انرژی: 10/10</p>
    <button id="clickButton" onclick="hitMouse()">💰</button>
    <button id="upgradeButton" onclick="buyUpgrade()">⚡ افزایش قدرت کلیک (هزینه: 10)</button>
    <button id="resetButton" onclick="resetGame()">🔄 ریست بازی</button>
  </div>
</body>
</html>
